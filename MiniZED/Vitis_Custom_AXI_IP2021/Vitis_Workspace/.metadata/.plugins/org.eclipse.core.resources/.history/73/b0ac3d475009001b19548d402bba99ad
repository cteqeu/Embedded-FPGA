#include <stdio.h>
#include "platform.h"
#include "xil_printf.h"
#include "custom_axi_driver.h"


int main()
{
    int getal1 = 0;
    int getal2 = 0;
    int operation = 0;
    init_platform();

    xil_printf("Custom AXI IP Demo");
    xil_printf("Demo Application by Vincent Claes\n\r");
    xil_printf("Enter the first number:\n\r");
    scanf("%d",&getal1);
    xil_printf("Enter the second number:\n\r");
    scanf("%d",&getal2);
    xil_printf("Enter operation:\n\r");
    scanf("%d",&operation);
    xil_printf("calculating... \n\r");

    CUSTOM_AXI_mWriteReg(XPAR_AXI_MATH_UNIT_0_S00_AXI_BASEADDR,AXI_MATH_UNIT_S00_AXI_SLV_REG0_OFFSET,getal1);
    CUSTOM_AXI_mWriteReg(XPAR_AXI_MATH_UNIT_0_S00_AXI_BASEADDR,AXI_MATH_UNIT_S00_AXI_SLV_REG0_OFFSET,getal2);
    CUSTM_AXI_mWriteReg(XPAR_AXI_MATH_UNIT_0_S00_AXI_BASEADDR,AXI_MATH_UNIT_S00_AXI_SLV_REG0_OFFSET,operation);
    u32 result = CUSTOM_AXI_mReadReg(XPAR_AXI_MATH_UNIT_0_S00_AXI_BASEADDR,AXI_MATH_UNIT_S00_AXI_SLV_REG3_OFFSET);
    printf("Result: %d\n\r", (int)result);
    cleanup_platform();
    return 0;
}
